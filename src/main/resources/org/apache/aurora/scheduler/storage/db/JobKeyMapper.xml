<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.apache.aurora.scheduler.storage.db.JobKeyMapper">
  <insert id="insert">
    INSERT INTO job_keys (
      role,
      environment,
      name
    ) VALUES (
      #{role},
      #{environment},
      #{name}
    )
  </insert>
  <sql id="job_key_clause">
    role = #{role}
    AND environment = #{environment}
    AND name = #{name}
  </sql>
  <delete id="delete">
    DELETE FROM job_keys
    WHERE <include refid="job_key_clause"/>
  </delete>
  <select id="exists" resultType="org.apache.aurora.gen.JobKey">
    SELECT * FROM job_keys
    WHERE <include refid="job_key_clause"/>
  </select>
  <select id="selectAll" resultType="org.apache.aurora.gen.JobKey">
    SELECT * FROM job_keys
  </select>
</mapper>
